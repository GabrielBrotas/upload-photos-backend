ir no cloud mongodb atlas
criar um cluster gratuito
clicar no nome do cluster para abrir as config dele
ir em Collection para gerenciar nosso databasee
criar um databasee e já definir o nome da collection (table), colocar o mesmo do exemplo criado nosso Schema Posts

    DATABASE NAME = uploade-example
    COLLECTION NAME = Posts

create

feito isso o database vai estar nas collections
para testar a conexão vamos em 'clusters' -> 'security' -> 'Network Accesss' e adicionar um ip address me 'IP whitelist'
para permitir que todos os tipos de ip tenham acesso a nossa aplicação vamos clicar em "ALLOW ACCESS FROM ANYWHERE' e confirmar

depois vamos criar um user para ter acesso a nossa API em 'Database Access' -> 'Add New Database User';
colocar com a opçao 'Read and write to any database'

feito isso vamos nos conectar com essa base de dados
em 'Clusters' vamos em 'connect' e selecionar a opção 'connect your application' e copiar a url de conexão para o backend onde cria a conexao com o url do db


ir no 'https://dashboard.heroku.com/apps' <-heroku
new -> 'create new app', colocar o nome e a regiao do app

criado o app vamo escolher o deployment method
vamos escolher a do Github quq vai fazer com que cada vez que detecte uma nova alteração no github ele vai fazer um deploy automatico.

fazer a conexao com a conta do github e colocar o nome do repositorio, nesse caso: 'upload-photos-backend'

da um search e connect
e depois 'enabel automatic deploys

criar um arquivo Procfile que só o heroku entende para saber qual comando utilizar quando iniciar a aplicação

conteudo:
web: yarn start

yarn start vai executar esse comando já quee na web nao preecisamos do nodemon pois eele vai entender sempre que houvere uma mudança no repositorio
"start": "node src/index.js"
web: é só para identificar qual comando deve ser executado

no heroku ir em 'Settings' para configurar as variaveis ambientes 

'Config Vars' -> "Reveal Config Vars"

e adicionar nossas variaveis ambientes localizadas no .env e mudar os valores ex:

APP_URL=https://upload-example-react-node.herokuapp.com/
    para pegar o eendereeço da aplicação ir em 'open app' com o botao direito e copiar o endereço do link

MONGO_URL=mongodb+srv://gbrotas:<password>@cluster0-od5cw.mongodb.net/<dbname>?retryWrites=true&w=majority
    url do cluster trocando a senha e o dbname=upload-example

STORAGE_TYPE=s3
    como ta em produção é para salvar na amazon s3

restante...
AWS_ACCESS_KEY_ID=AKIAYY3CX67JBUFF3POS
AWS_SECRET_ACCESS_KEY=Tzvsktnr6HJq1cjDamE6IouZY5OeMpIzNohipLl9
AWS_DEFAULT_REGION=us-east-1

-fazer o commit no githun e realizar o deploy da aplicação

ir no overview
